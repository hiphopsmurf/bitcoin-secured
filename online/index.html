<!DOCTYPE html>
<html ng-app="bitcoinSecured">
	<head>
	<title>Bitcoin Secured 0.1: Online</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/bootstrap.css">
  <link rel="stylesheet" href="css/main.css">
	<script type="text/javascript" src="js/underscore-min.js"></script>
	<script type="text/javascript" src="js/zepto.js"></script>
	<script type="text/javascript" src="js/angular.js"></script>
	<script type="text/javascript" src="js/angular-sanitize.js"></script>
	<script type="text/javascript" src="js/ui-bootstrap-0.2.0.js"></script>
	<script type="text/javascript" src="js/ui-bootstrap-tpls-0.2.0.js"></script>
	<script type="text/javascript" src="js/bitcoinjs-min.js"></script>
	<script type="text/javascript" src="js/tx.js" charset="utf-8"></script>
	<script type="text/javascript" src="js/qrcode.js"></script>
	<script type="text/javascript" src="js/main.js"></script>
    <style>
      .hide {
        display: none;
      }
    </style>
</head>

<body ng-controller="AppController">

  <div class="container">

    <div class="masthead">
      <h3>Bitcoin Secured v.0.1: Online</h3>
      <div class="navbar">
        <div class="navbar-inner">
          <div class="container">
            <ul class="nav">
              <li ng-class="{ active: isHome }"><a href="#/"><i class="icon-home"></i> Home</a></li>
              <li><a href="#"><i class="icon-wrench"></i> Instructions</a></li>
              <li ng-class="{ active: isDownload }"><a href="#/download"><i class="icon-hdd"></i> Downloads</a></li>
              <li><a href="#"><i class="icon-eye-open"></i> About</a></li>
              <li><a href="#"><i class="icon-pencil"></i> Contact</a></li>
            </ul>
          </div>
        </div>
      </div><!-- /.navbar -->
    </div>

    <div ng-controller="AlertCtrl">
      <alert ng-repeat="alert in alerts" type="alert.type" close="closeAlert($index)">{{alert.msg}}</alert>
    </div>

    <section ng-view=""></section>

    <script id="home.html" type="text/ng-template">

      <div id="step-nav">
        <ul class="pager">
          <li class="" ng-class="{disabled: !hasPreviousStep()}">
            <a href="javascript:void(0);" ng-click="decrementStep()">&larr; Previous Step</a>
          </li>
          <li class="" ng-class="{disabled: !hasNextStep()}">
            <a href="javascript:void(0);" ng-click="incrementStep()">Next Step &rarr;</a>
          </li>
        </ul>
      </div>

      <div class="clearfix"></div>

        <div ng-switch on="selection">

          <div ng-switch-when="Enter Data">
            <div class="row-fluid" ng-controller="FormCtrl">
              <div class="span6">
                <form class="form-transaction" ng-submit="processForm()">
                  <h3 class="form-transaction-heading">Step 1: Transaction Data</h3>
                  <input ng-model="transaction.address" type="text" class="input-block-level" placeholder="Cold Storage Address" required>
                  <input ng-model="transaction.recipient" type="text" class="input-block-level" placeholder="Recipient Address" required>
                  <input ng-model="transaction.amount" type="text" class="input-block-level" placeholder="Amount in BTC" required>
                  <input ng-model="transaction.fee" type="text" class="input-block-level" placeholder="Transaction Fee in BTC" required>
                  <button class="btn btn-primary">Create Paste for Offline Signing!</button><br><br>
                <button class="btn" ng-click="clearAll($event)">Clear all</button>

                </form>
              </div><!-- /span -->
              <div class="span6">
                <div id="raw-transaction">
                  <h3>Step 2: Text to Paste</h3>
                  <p>Copy this text, transfer it to the offline computer, and paste it in the offline page of Bitcoin Secured (offline.html). When you're done, click "next step" (above).</p>
                  <textarea ng-model="rawtx" readonly></textarea>
                  <div id="qr-button"><button type="button" class="btn {{buttonState.qrcodestate}}" ng-click="showQr()">Show QR Code <i class="icon-qrcode"></i></div>
                </div>
              </div>
          </div><!-- /formCtrl -->
        </div>

        <div ng-switch-when="Enter Paste">
          <div class="row-fluid" ng-controller="SubmitCtrl">
            <div class="span6">
              <form class="form-transaction" ng-submit="submitTx()">
                <h3 class="form-transaction-heading">Step 4: Submit Transaction</h3>
                <p>This is where you submit the signed transaction text that was generated by the offline signing portion of this application.  Please paste or scan the QR code into the space provided below, and press submit when you're done.  This will broad cast your transaction to the bitcoin network.</p> <p><strong>WARNING: All transactions are final, so only submit the transaction if you are sure you used the correct address and amount.</strong></p>
                <textarea ng-model="rawpaste"></textarea>
                  <button class="btn btn-primary" type="submit">Create transaction!</button>
              </form>
            </div>
            <div class="span6">
            </div>
          </div>
        </div>

        </div><!-- /switch -->

    </script>


    <script id="download.html" type="text/ng-template">
      <div>
        <p>Download link for offline signing app: <a href='https://github.com/esbullington/bitcoin-secured/blob/master/offline/build/bitcoin-secured-offline-0.1.zip'>Bitcoin-Secured Offline v. 0.1</a></p>
        <p>MD5 Hash of program zip file:</p>
        <pre>
7eb7bfd0c1947b0383e2ec6ab28bbe77  bitcoin-secured-offline-0.1.zip
        </pre>
        <pre>
-----BEGIN-SIGNATURE-BLOCK-------------------------------------
Address:    14LKfACXKfnrQxxxtnRRT5uXMkJeTDQteY
Message:    "7eb7bfd0c1947b0383e2ec6ab28bbe77  bitcoin-secure"
            "d-offline-0.1.zip"
PublicKey:  04f3d30c921cfe725ac949c097c594f0cd26b31c9bb495a6e5
            5c944ba9b9801791e63b50cef46330afd0617bfe9ea7e6d70b
            5035acc3402d6d47e653112b0b7921
Signature:  aefd7a0b02a6c69fb06b7bea23ffa74cae2a5750630d2ddb59
            541e6a79babf52b12b55d05dcdb4c99ce6aee4dc3718c29b26
            92a632df645fd14be1c249f7545a
-----END-SIGNATURE-BLOCK---------------------------------------
        </pre>
      </div>
    </script>

  </div><!-- /container -->

</body>
</html>
